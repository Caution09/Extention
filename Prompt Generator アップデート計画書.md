# Prompt Generator アップデート計画書

📋 ドキュメント情報

作成日: 2024 年 12 月
最終更新: 2024 年 12 月 XX 日
現在バージョン: v2.1.0
対象期間: 2024 年 12 月〜2025 年 3 月

🎯 プロジェクト概要

Prompt Generator の使いやすさと機能性を向上させるため、段階的に新機能を追加していく計画です。
ユーザーフィードバックと技術的実現可能性を考慮し、優先順位を設定しています。

## 📊 実装済み機能

### Phase 6: 基本機能強化 ✅

- **設定インポート/エクスポート**: 全設定のバックアップ・復元機能
- **ショートカットキー**: キーボード操作の効率化（Ctrl+S、Ctrl+K 等）

### Phase 7: データ連携強化 ✅

- **CSV 入出力機能**: ローカル辞書の表計算ソフト連携
- **自動 Generate 機能**: NovelAI 専用の連続生成機能

### Phase 8: 複数プロンプト対応 ✅

- **プロンプトセレクター**: 最大 100 個のスロット管理
- **プロンプト別の状態管理**: 各スロットの独立した編集
- **プロンプトのネーミング機能**: スロットに名前を付けて整理
- **動的スロット管理**: スロットの追加・削除・並び替え
- **結合プレビュー**: 全スロットの結合結果を事前確認

### Phase 8.5: 高度なスロット機能 ✅ NEW!

- **要素抽出モード**: ランダム/連続抽出機能
  - 通常モード: 従来のテキスト編集
  - ランダム抽出モード: カテゴリーから毎回ランダムに 1 要素を選択
  - 連続抽出モード: カテゴリーから順番に 1 要素を選択
- **カテゴリーフィルター**: 大項目・中項目で抽出範囲を指定
- **動的プロンプト生成**: Generate 時に要素を動的に選択

## 📊 今後の実装予定

優先度：高 ⭐⭐⭐⭐⭐

| 機能名                   | 難易度 | 想定工数 | 概要                                 |
| ------------------------ | ------ | -------- | ------------------------------------ |
| カテゴリードロップダウン | ⭐     | 0.5 日   | 日要素辞書の UI 改善                 |
| プロンプト履歴           | ⭐⭐   | 1.5 日   | 生成したプロンプトの履歴管理・再利用 |
| スロットグループ機能     | ⭐⭐⭐ | 2 日     | スロットをグループ化して管理         |

優先度：中 ⭐⭐⭐

| 機能名         | 難易度 | 想定工数 | 概要                         |
| -------------- | ------ | -------- | ---------------------------- |
| テーマ切り替え | ⭐⭐   | 1 日     | ダークモード等のテーマ対応   |
| プロンプト分析 | ⭐⭐⭐ | 2 日     | 要素の使用頻度分析・レポート |

優先度：低 ⭐

| 機能名            | 難易度   | 想定工数 | 概要                            |
| ----------------- | -------- | -------- | ------------------------------- |
| セレクター設定 UI | ⭐⭐⭐⭐ | 3 日     | 対象要素の視覚的選択            |
| クラウド同期      | ⭐⭐⭐⭐ | 5 日     | 設定のクラウドバックアップ      |
| 多言語対応        | ⭐⭐⭐   | 3 日     | UI の多言語化（英語・中国語等） |

## 🚀 次期実装フェーズ

### Phase 9: 履歴・分析機能（1.5 週間）

実装予定機能

**プロンプト履歴**

- 生成したプロンプトを自動保存
- 履歴から再利用・編集
- 日時・使用スロット情報を記録
- 履歴の検索・フィルタリング
- エクスポート機能

**重複要素チェッカー**

- リアルタイムで重複を検出
- 類似要素の警告
- 自動除去オプション

技術要件

- IndexedDB での履歴管理
- 効率的な重複検出アルゴリズム
- 履歴 UI の設計

### Phase 10: 管理機能強化（1 週間）

実装予定機能

**スロットグループ機能**

- スロットをフォルダのようにグループ化
- グループ単位での一括操作
- グループ別の結合オプション
- 階層的な管理

**カテゴリー管理 UI**

- カテゴリーの新規作成
- 既存カテゴリーの編集・削除
- カテゴリーの並び替え
- インポート/エクスポート

技術要件

- グループ管理システム
- カテゴリーエディタ UI
- データ整合性の保証

### Phase 11: UI/UX・分析機能（1 週間）

実装予定機能

**テーマ切り替え**

- ライトテーマ（デフォルト）
- ダークテーマ
- ハイコントラストテーマ
- カスタムテーマ作成

**プロンプト分析**

- 要素使用頻度ランキング
- カテゴリー別統計
- 時系列グラフ
- 分析レポートの出力

**お気に入り機能**

- よく使う要素に ★ マーク
- お気に入りリストから素早くアクセス
- カテゴリー横断での管理

技術要件

- CSS カスタムプロパティ
- Chart.js or D3.js
- 分析データの集計処理

## 📝 詳細実装仕様

### 1. プロンプト履歴仕様（予定）

```javascript
// 履歴エントリの構造
{
  id: "history_20241220_001",
  timestamp: 1703052000000,
  prompt: "masterpiece, best quality, 1girl, long hair...",
  slots: [
    { id: 0, name: "基本設定", content: "masterpiece, best quality" },
    { id: 1, name: "キャラクター", mode: "random", extraction: "long hair" }
  ],
  tags: ["キャラクター", "ファンタジー"],
  favorite: false
}
```

### 2. スロットグループ仕様（予定）

```javascript
// グループ構造
{
  id: "group_001",
  name: "キャラクター設定セット",
  slots: [0, 2, 5], // スロットIDの配列
  color: "#FF6B6B",
  combineMode: "sequential", // 'all' | 'sequential' | 'random'
  enabled: true
}
```

## 🔧 技術的考慮事項

### ストレージ戦略

- 履歴データ: IndexedDB（容量制限なし）
- 設定データ: chrome.storage.local（5MB）
- キャッシュ: メモリ内管理

### パフォーマンス最適化

- 履歴の遅延読み込み（最新 50 件のみ初期表示）
- Virtual Scrolling（大量履歴対応）
- 分析データのバックグラウンド処理

### データ移行

- 履歴機能追加時の既存データ保護
- グループ機能のスムーズな導入
- 段階的な UI 変更

## 📅 リリース予定

- v2.0.0 (Phase 8 完了): 2024 年 12 月初旬 ✅
- v2.1.0 (Phase 8.5 完了): 2024 年 12 月中旬 ✅
- v2.2.0 (Phase 9 予定): 2025 年 1 月中旬
- v2.3.0 (Phase 10 予定): 2025 年 2 月初旬
- v2.4.0 (Phase 11 予定): 2025 年 2 月末

## 🎉 将来的な展望

- AI 連携機能（プロンプト自動生成・最適化）
- プロンプト共有機能（コミュニティ）
- プラグインシステム
- 画像生成結果との連携（お気に入り画像のプロンプト管理）
- プロンプト効果の A/B テスト機能

## 📈 最近の成果

### v2.1.0 での大きな進化

- **動的プロンプト生成**: Generate 時に要素を動的に選択する画期的な機能
- **柔軟性の向上**: 固定プロンプトと動的要素の組み合わせが可能に
- **創造性の拡大**: ランダム要素により予期しない組み合わせを発見
- **効率的な実験**: 連続抽出モードで体系的な要素テストが可能

注意: この計画は暫定的なものであり、開発状況やユーザーフィードバックにより変更される可能性があります。
