#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# 全キャラクターの性別分類を一括で復元
with open('マスターデータ.tsv', 'r', encoding='utf-8') as f:
    lines = f.readlines()

new_lines = []
converted_count = 0

# 全作品の性別設定
series_classifications = {
    # 女性のみ作品
    'けものフレンズ': '女性',
    'ご注文はうさぎですか？': '女性', 
    'そにアニ': '女性',
    'のんのんびより': '女性',
    'ひだまりスケッチ': '女性',
    'ぼっち・ざ・ろっく！': '女性',
    'まちカドまぞく': '女性',
    'ゆるキャン△': '女性',
    'よつばと！': '女性',
    'らき☆すた': '女性',
    'ゆゆ式': '女性',
    'けいおん！': '女性',
    'きんいろモザイク': '女性',
    'がっこうぐらし！': '女性',
    'こみっくがーるず': '女性',
    '私に天使が舞い降りた！': '女性',
    'プリパラ': '女性',
    'アイカツ！': '女性',
    'アイドルマスター': '女性',
    'アイドルマスターシンデレラガールズ': '女性',
    'アイドルマスターミリオンライブ！': '女性',
    'アカメが斬る！': '女性',
    'アクエリオン': '女性',
    'アズールレーン': '女性',
    'ライザのアトリエ': '女性',
    'バンドリ！ ガールズバンドパーティ！': '女性',
    'イジらないで、長瀞さん': '女性',
    'ガールズパンツァー': '女性',
    '旅する魔女': '女性',
    'ウマ娘': '女性',
    '異世界おじさん': '女性',
    'オーディン スフィア': '女性',
    'オーバーウォッチ': '女性',
    'カードキャプターさくら': '女性',
    'キルラキル': '女性',
    'プリキュア': '女性',
    'ギルティギア': '女性',
    'グランブルーファンタジー': '女性',
    'サクラ大戦': '女性',
    'シャイニングシリーズ': '女性',
    'アイドルマスターシャイニーカラーズ': '女性',
    'steins;gate': '女性',
    'ジャヒー様はくじけない': '女性',
    'スプラトゥーン': '女性',
    'セーラームーン': '女性',
    'ゼノブレイド': '女性',
    'デート・ア・ライブ': '女性',
    'ひぐらしのなく頃に': '女性',
    '宇崎ちゃんは遊びたい！': '女性',
    '小林さんちのメイドラゴン': '女性',
    '日常': '女性',
    '推しの子': '女性',
    'ヴァイオレット・エヴァーガーデン': '女性',
    '侵略！イカ娘': '女性',
    '俺の妹がこんなに可愛いわけがない': '女性',
    '同級生シリーズ': '女性',
    '咲': '女性',
    '不思議の国のアリス': '女性',
    'ラブライブ！': '女性',
    'ラブライブ！サンシャイン！！': '女性',
    'ラブライブ！虹ヶ咲学園スクールアイドル同好会': '女性',
    'リコリスリコイル': '女性',
    '魔女の宅急便': '女性',
    '東方': '女性',
    
    # 人外作品
    '星のカービィ': '人外',
    
    # 混合作品（個別設定必要）
    'エルフェンリート': '混合',
    'エロマンガ先生': '混合',
    'ゼルダの伝説シリーズ': '混合',
    'ソードアート・オンライン': '混合',
    'ダンガンロンパ': '混合',
    'チェンソーマン': '混合',
    'To Heart': '混合',
    'DC～ダ・カーポ～': '混合',
    'ノーゲーム・ノーライフ': '混合',
    'ハヤテのごとく！': '混合',
    'ブルーアーカイブ': '混合',
    'プリンセスコネクト！': '混合',
    'ポケモン': '混合',
    'マリオブラザーズ': '混合',
    'メイドインアビス': '混合',
    'VOICE ROID': '混合',
    'VOCALOID': '混合',
    'Hololive': '混合',
    'らんま1/2': '混合',
    '新世紀エヴァンゲリオン': '混合',
    '涼宮ハルヒの憂鬱': '混合',
    '灼眼のシャナ': '混合',
    '無職転生': '混合',
    '物語シリーズ': '混合',
    '犬夜叉': '混合',
    '狼と香辛料': '混合',
    '三國無双': '混合',
    '中二病でも恋がしたい！': '混合',
    '呪術廻戦': '混合',
    'リトルバスターズ!': '混合',
    'ルパン三世': '混合',
    'ワンピース': '混合',
    'ヴァンパイア': '混合',
    'ヴァンパイア(格ゲー)': '混合',
    '月姫': '混合',
    '遊戯王': '混合'
}

# 混合作品の個別キャラクター設定
individual_characters = {
    # 基本男性キャラクター
    'キョン': '男性',
    '古泉一樹': '男性',
    '坂井悠二': '男性',
    'ルーデウス': '男性',
    'ルイジェルド': '男性',
    'パウロ': '男性',
    '阿良々木暦': '男性',
    '犬夜叉': '男性',
    '弥勒': '男性',
    '殺生丸': '男性',
    'クラフト・ロレンス': '男性',
    'リンク': '男性',
    'キリト': '男性',
    '富樫勇太': '男性',
    '五条悟': '男性',
    '虎杖悠仁': '男性',
    '伏黒恵': '男性',
    '直枝理樹': '男性',
    '井ノ原真人': '男性',
    '宮沢謙吾': '男性',
    'ルパン三世': '男性',
    '次元大介': '男性',
    '石川五ェ門': '男性',
    '銭形警部': '男性',
    'ルフィ': '男性',
    'ゾロ': '男性',
    'サンジ': '男性',
    'ウソップ': '男性',
    'デミトリ': '男性',
    'ビシャモン': '男性',
    '遠野志貴': '男性',
    '渚カヲル': '男性',
    '碇シンジ': '男性',
    'サトシ': '男性',
    'マリオ': '男性',
    'ルイージ': '男性',
    'レグ': '男性',
    '鏡音レン': '男性',
    '十代': '男性',
    
    # 人外キャラクター
    'コロク': '人外',
    'モノクマ': '人外',
    'ポチタ': '人外',
    'サーナイト': '人外',
    'キノピオ': '人外',
    'ヨッシー': '人外',
    'ナナチ': '人外',
    'カービィ': '人外',
    'デデデ大王': '人外',
    'チョッパー': '人外'
}

for line in lines:
    parts = line.strip().split('\t')
    
    if len(parts) >= 3 and line.startswith('キャラクター\t'):
        series = parts[1]
        character = parts[2]
        
        # その他はスキップ
        if series == 'その他':
            new_lines.append(line)
            continue
            
        # 作品別分類
        if series in series_classifications:
            classification_type = series_classifications[series]
            
            if classification_type == '混合':
                # 個別設定チェック
                if character in individual_characters:
                    gender = individual_characters[character]
                else:
                    gender = '女性'  # デフォルト
                    
                new_line = line.replace('キャラクター\t', f'キャラクター({gender})\t')
                new_lines.append(new_line)
                converted_count += 1
                print(f"変換: {character} ({gender})")
                
            else:
                # 一律分類
                new_line = line.replace('キャラクター\t', f'キャラクター({classification_type})\t')
                new_lines.append(new_line)
                converted_count += 1
                print(f"変換: {character} ({classification_type})")
        else:
            # 未定義作品はデフォルト女性
            new_line = line.replace('キャラクター\t', 'キャラクター(女性)\t')
            new_lines.append(new_line)
            converted_count += 1
            print(f"変換: {character} (女性) [未定義作品]")
    else:
        new_lines.append(line)

with open('マスターデータ.tsv', 'w', encoding='utf-8') as f:
    f.writelines(new_lines)

print(f"\n全キャラクター性別分類完了: {converted_count}名")